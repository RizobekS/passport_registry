{% extends "passports/pdf/base.html" %}
{% load pdf_utils %} {# dmy, fileuri #}

{% block extra_css %}
<style>
  .title{ text-align:center; margin:0 0 2mm 0; }
  .tri{ display:block; text-align:center; }

  .chip-table{ width:100%; border-collapse:collapse; table-layout:fixed; margin-top:3mm; }
  .chip-table th,.chip-table td{ border:0.6pt solid #333; vertical-align:top; padding:2mm; line-height:1.25; font-size:10.5pt; }
  .c-date{ width:18%; } .c-chip{ width:32%; } .c-bar{ width:50%; }

  .barcode { height:14mm; max-width:100%; display:block; }
  .row-fill{ height:16mm; }
  .lined{
    min-height:14mm;
    background-image:linear-gradient(to bottom, transparent 92%, #bbb 92%, #bbb 94%, transparent 94%);
    background-size:100% 7mm; padding:1mm 1.25mm;
  }

  .signbox { margin-top:8mm; font-size:10.5pt; }
  .line { border-bottom:0.6pt solid #333; display:inline-block; width:85%; vertical-align:bottom; }
</style>
{% endblock %}

{% block content %}
  <h3 class="title">
    Чипнинг идентификация рақами / Идентификационный номер чипа<br>
    <span class="muted">Chip identification number</span>
  </h3>

  <table class="chip-table">
    <colgroup><col class="c-date"><col class="c-chip"><col class="c-bar"></colgroup>
    <thead>
      <tr>
        <th><span class="tri">Сана</span><span class="tri">Дата</span><span class="tri"><strong>Date</strong></span></th>
        <th><span class="tri">Чип коди</span><span class="tri">Код чипа</span><span class="tri"><strong>Chip code</strong></span></th>
        <th><span class="tri">Штрих код</span><span class="tri">Barcode</span><span class="tri"><strong>Barcode</strong></span></th>
      </tr>
    </thead>
    <tbody>
      <!-- Первая строка — из БД -->
      <tr class="row-fill">
        <td class="lined">{{ passport.issue_date|dmy|dash }}</td>
        <td class="lined">{{ horse.microchip|dash }}</td>
        <td class="lined">
          {% if passport.barcode_image %}
            <img class="barcode" src="{{ passport.barcode_image|fileuri }}" alt="barcode">
            {% if passport.barcode_value %}<div style="margin-top:1mm">{{ passport.barcode_value }}</div>{% endif %}
          {% endif %}
        </td>
      </tr>

      <!-- Ещё строки для ручного внесения -->
      <tr class="row-fill"><td class="lined"></td><td class="lined"></td><td class="lined"></td></tr>
      <tr class="row-fill"><td class="lined"></td><td class="lined"></td><td class="lined"></td></tr>
      <tr class="row-fill"><td class="lined"></td><td class="lined"></td><td class="lined"></td></tr>
    </tbody>
  </table>

  <div class="signbox">
    Федерация раиси ўринбосари / Заместитель председателя Федерации / Deputy-chairman of Federation,
    <span class="line"></span>
  </div>
  <div class="signbox">
    Берилган вакти / Дата выдачи / <em>Date of issue</em>: <span class="line">{{ passport.issue_date|dmy|dash }}</span>
  </div>
{% endblock %}
